function initFoldingBox(){var t=document.getElementsByClassName(folding_box__dispatcherClass);appendClickListenerToAll(t,folding_box__clickHandler),initAdditionalContentToFolds()}function appendClickListenerToAll(t,e){"use strict";for(var n,i=0,a=t.length;a>i;)n=t[i],n.addEventListener?n.addEventListener("click",e,!1):n.attachEvent&&n.attachEvent("onclick",e),i++;n=null}function initAdditionalContentToFolds(t,e){t="undefined"!=typeof t?t:!1,e="undefined"!=typeof e?e:!1;for(var n,i=document.getElementsByClassName(folding_box__foldableContentClass),a="",s="",o="",l=0,r=0,_=i.length,c=0,d=0,u="",v="",f="";_>r;){a="",u="",s="",o="",l=0,c=0,d=0,v="",f="",n=i[r],c=toolBox.outerHeight(n),d=c/2,u=n.innerHTML,e&&(v=toolBox.getBackground(n.parentNode),n.parentNode.parentNode&&(f=getBackground(n.parentNode.parentNode))),t&&(a=n.innerText?n.innerText:n.textContent,a.trim().length&&0==n.children.length&&(u="",l=Math.floor(a.length/2),s=a.substr(0,l),o=a.substr(l+1,a.length)));var h={___content___:u,___halfContentHeight___:d,___contentHeight___:c,___topHalf___:s,___bottomHalf___:o,___bgcolor___:v};n.innerHTML=injectAll(folding_box__flap_injection,h),n.style.height=c+"px",n.style.background=f,findAndCLoseParent(n),r++}i=null,n=null}function getBackground(t){"use strict";var e="";return t.currentStyle?e=t.currentStyle.backgroundColor:window.getComputedStyle&&(e=document.defaultView.getComputedStyle(t,null).getPropertyValue("background")),e}function injectAll(t,e){"use strict";for(var n in e)t=t.replace(/(___[a-zA-Z]+___)/g,function(t,n){var i=e[n];return"undefined"==typeof i?t:i});return t}function findAndCLoseParent(t){for(var e=!1,n=null,i=-1;t!=document.body&&!(e=t.classList?t.classList.contains(folding_box__containerClass):new RegExp("(^| )"+folding_box__containerClass+"( |$)","gi").test(t.className));)t=t.parentNode;return t==document.body?(t=null,n=null,i=-1,void 0):(t.classList?t.classList.toggle(folding_box__foldedClass):(n=t.className.split(" "),i=n.indexOf(folding_box__foldedClass),i>=0?n.splice(i,1):n.push(folding_box__foldedClass),t.className=n.join(" "),n=null,i=-1),n=null,i=-1,void 0)}function folding_box__clickHandler(t){var e=t.target||t.srcElement;findAndCLoseParent(e)}var folding_box__dispatcherClass="js-folding_box__opener",folding_box__foldedClass="folding_box--folded",folding_box__containerClass="folding_box",folding_box__foldableContentClass="folding_box--foldable",folding_box__flap_injection='<div class="folding_box__flap--top" style="height : ___halfContentHeight___px ; background: ___bgcolor___ ;">___bottomHalf___</div><div class="folding_box__flap--bottom" style="height :___halfContentHeight___px; background : ___bgcolor___ ;">___topHalf___</div><div class="folding_box--content" style="height:___contentHeight___px;">___content___</div>';toolBox.readyAndWilling(initFoldingBox);