function initFoldingBox(){var n=document.getElementsByClassName(folding_box__dispatcherClass);appendClickListenerToAll(n,folding_box__clickHandler),initAdditionalContentToFolds()}function initAdditionalContentToFolds(n,e){n="undefined"!=typeof n?n:!1,e="undefined"!=typeof e?e:!1;for(var t,o=document.getElementsByClassName(folding_box__foldableContentClass),_="",l="",i="",d=0,a=0,s=o.length,r=0,g=0,c="",f="",u="";s>a;){_="",c="",l="",i="",d=0,r=0,g=0,f="",u="",t=o[a],r=outerHeight(t),g=r/2,c=t.innerHTML,e&&(f=getBackground(t.parentNode),t.parentNode.parentNode&&(u=getBackground(t.parentNode.parentNode))),n&&(_=t.innerText?t.innerText:t.textContent,_.trim().length&&0==t.children.length&&(c="",d=Math.floor(_.length/2),l=_.substr(0,d),i=_.substr(d+1,_.length)));var b={___content___:c,___halfContentHeight___:g,___contentHeight___:r,___topHalf___:l,___bottomHalf___:i,___bgcolor___:f};t.innerHTML=injectAll(folding_box__flap_injection,b),t.style.height=r+"px",t.style.background=u,findAndCLoseParent(t),a++}o=null,t=null}function findAndCLoseParent(n){for(var e=!1,t=null,o=-1;n!=document.body&&!(e=n.classList?n.classList.contains(folding_box__containerClass):new RegExp("(^| )"+folding_box__containerClass+"( |$)","gi").test(n.className));)n=n.parentNode;return n==document.body?(n=null,t=null,o=-1,void 0):(n.classList?n.classList.toggle(folding_box__foldedClass):(t=n.className.split(" "),o=t.indexOf(folding_box__foldedClass),o>=0?t.splice(o,1):t.push(folding_box__foldedClass),n.className=t.join(" "),t=null,o=-1),t=null,o=-1,void 0)}function folding_box__clickHandler(n){var e=n.target||n.srcElement;findAndCLoseParent(e)}var folding_box__dispatcherClass="js-folding_box__opener",folding_box__foldedClass="folding_box--folded",folding_box__containerClass="folding_box",folding_box__foldableContentClass="folding_box--foldable",folding_box__flap_injection='<div class="folding_box__flap--top" style="height : ___halfContentHeight___px ; background: ___bgcolor___ ;">___bottomHalf___</div><div class="folding_box__flap--bottom" style="height :___halfContentHeight___px; background : ___bgcolor___ ;">___topHalf___</div><div class="folding_box--content" style="height:___contentHeight___px;">___content___</div>';readyAndWilling(initFoldingBox);