function initFoldingBox(){var n=document.getElementsByClassName(folding_box__dispatcherClass);appendClickListenerToAll(n,folding_box__clickHandler),initAdditionalContentToFolds()}function initAdditionalContentToFolds(n,e){n="undefined"!=typeof n?n:!1,e="undefined"!=typeof e?e:!1;for(var t,o=document.getElementsByClassName(folding_box__foldableContentClass),l="",i="",_="",d=0,a=0,r=o.length,s=0,c=0,f="",g="",u="";r>a;){l="",f="",i="",_="",d=0,s=0,c=0,g="",u="",t=o[a],s=outerHeight(t),c=s/2,f=t.innerHTML,e&&(g=getBackground(t.parentNode),t.parentNode.parentNode&&(u=getBackground(t.parentNode.parentNode))),n&&(l=t.innerText?t.innerText:t.textContent,l.trim().length&&0==t.children.length&&(f="",d=Math.floor(l.length/2),i=l.substr(0,d),_=l.substr(d+1,l.length)));var b={___content___:f,___halfContentHeight___:c,___contentHeight___:s,___topHalf___:i,___bottomHalf___:_,___bgcolor___:g};t.innerHTML=injectAll(folding_box__flap_injection,b),t.style.height=s+"px",t.style.background=u,findAndCLoseParent(t),a++}o=null,t=null}function findAndCLoseParent(n){for(var e=!1,t=null,o=-1;n!=document.body&&!(e=n.classList?n.classList.contains(folding_box__containerClass):new RegExp("(^| )"+folding_box__containerClass+"( |$)","gi").test(n.className));)n=n.parentNode;return n==document.body?(n=null,t=null,o=-1,void 0):(n.classList?n.classList.toggle(folding_box__foldedClass):(t=n.className.split(" "),o=t.indexOf(folding_box__foldedClass),o>=0?t.splice(o,1):t.push(folding_box__foldedClass),n.className=t.join(" "),t=null,o=-1),t=null,o=-1,void 0)}function folding_box__clickHandler(n){var e=n.target||n.srcElement;findAndCLoseParent(e)}var folding_box__dispatcherClass="js-folding_box__opener",folding_box__foldedClass="folding_box--folded",folding_box__containerClass="folding_box",folding_box__foldableContentClass="folding_box--foldable",folding_box__flap_injection='<div class="folding_box__flap--top" style="height : ___halfContentHeight___px ; background: ___bgcolor___ ;">___bottomHalf___</div><div class="folding_box__flap--bottom" style="height :___halfContentHeight___px; background : ___bgcolor___ ;">___topHalf___</div><div class="folding_box--content" style="height:___contentHeight___px;">___content___</div>';readyAndWilling(initFoldingBox);